/**
  * UPYUN js-sdk 3.4.5
  * (c) 2022
  * @license MIT
  */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("axios")):"function"==typeof define&&define.amd?define(["axios"],t):e.upyun=t(e.axios)}(this,function(f){"use strict";f="default"in f?f.default:f;var l="undefined"!=typeof window&&("undefined"==typeof process||"browser"===process.title),a=1048576,p=e;function e(e){return!!e&&("object"==typeof e||"function"==typeof e)&&"function"==typeof e.then}p.default=e;var P="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function t(e,t){return e(t={exports:{}},t.exports),t.exports}var N=t(function(e,t){var r=P,n=t&&!t.nodeType&&t,t=e&&!e.nodeType&&e,o="object"==typeof P&&P;o.global!==o&&o.window!==o&&o.self!==o||(r=o);var i,s,y=2147483647,m=36,g=26,a=38,u=700,h=/^xn--/,l=/[^\x20-\x7E]/,c=/[\x2E\u3002\uFF0E\uFF61]/g,f={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},p=m-1,b=Math.floor,x=String.fromCharCode;function w(e){throw RangeError(f[e])}function v(e,t){for(var r=e.length,n=[];r--;)n[r]=t(e[r]);return n}function d(e,t){var r=e.split("@"),n="",r=(1<r.length&&(n=r[0]+"@",e=r[1]),(e=e.replace(c,".")).split("."));return n+v(r,t).join(".")}function A(e){for(var t,r,n=[],o=0,i=e.length;o<i;)55296<=(t=e.charCodeAt(o++))&&t<=56319&&o<i?56320==(64512&(r=e.charCodeAt(o++)))?n.push(((1023&t)<<10)+(1023&r)+65536):(n.push(t),o--):n.push(t);return n}function C(e){return v(e,function(e){var t="";return 65535<e&&(t+=x((e-=65536)>>>10&1023|55296),e=56320|1023&e),t+=x(e)}).join("")}function j(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function k(e,t,r){var n=0;for(e=r?b(e/u):e>>1,e+=b(e/t);p*g>>1<e;n+=m)e=b(e/p);return b(n+(p+1)*e/(e+a))}function S(e){var t,r,n,o,i,s,a,u=[],h=e.length,l=0,c=128,f=72,p=e.lastIndexOf("-");for(p<0&&(p=0),r=0;r<p;++r)128<=e.charCodeAt(r)&&w("not-basic"),u.push(e.charCodeAt(r));for(n=0<p?p+1:0;n<h;){for(o=l,i=1,s=m;h<=n&&w("invalid-input"),a=e.charCodeAt(n++),(m<=(a=a-48<10?a-22:a-65<26?a-65:a-97<26?a-97:m)||a>b((y-l)/i))&&w("overflow"),l+=a*i,!(a<(a=s<=f?1:f+g<=s?g:s-f));s+=m)i>b(y/(a=m-a))&&w("overflow"),i*=a;f=k(l-o,t=u.length+1,0==o),b(l/t)>y-c&&w("overflow"),c+=b(l/t),l%=t,u.splice(l++,0,c)}return C(u)}function O(e){for(var t,r,n,o,i,s,a,u,h,l,c=[],f=(e=A(e)).length,p=128,v=72,d=t=0;d<f;++d)(a=e[d])<128&&c.push(x(a));for(r=n=c.length,n&&c.push("-");r<f;){for(o=y,d=0;d<f;++d)p<=(a=e[d])&&a<o&&(o=a);for(o-p>b((y-t)/(u=r+1))&&w("overflow"),t+=(o-p)*u,p=o,d=0;d<f;++d)if((a=e[d])<p&&++t>y&&w("overflow"),a==p){for(i=t,s=m;!(i<(h=s<=v?1:v+g<=s?g:s-v));s+=m)c.push(x(j(h+(l=i-h)%(h=m-h),0))),i=b(l/h);c.push(x(j(i,0))),v=k(t,u,r==n),t=0,++r}++t,++p}return c.join("")}if(i={version:"1.3.2",ucs2:{decode:A,encode:C},decode:S,encode:O,toASCII:function(e){return d(e,function(e){return l.test(e)?"xn--"+O(e):e})},toUnicode:function(e){return d(e,function(e){return h.test(e)?S(e.slice(4).toLowerCase()):e})}},n&&t)if(e.exports==n)t.exports=i;else for(s in i)i.hasOwnProperty(s)&&(n[s]=i[s]);else r.punycode=i}),C=function(e){return"string"==typeof e},s=function(e){return"object"==typeof e&&null!==e},w=function(e){return null===e},M=function(e){return null==e};function R(e,t,r,n){r=r||"=";var o={};if("string"!=typeof e||0===e.length)return o;var i=/\+/g,t=(e=e.split(t=t||"&"),1e3),s=(n&&"number"==typeof n.maxKeys&&(t=n.maxKeys),e.length);0<t&&t<s&&(s=t);for(var a=0;a<s;++a){var u,h=e[a].replace(i,"%20"),l=h.indexOf(r),l=0<=l?(u=h.substr(0,l),h.substr(l+1)):(u=h,""),h=decodeURIComponent(u),l=decodeURIComponent(l);Object.prototype.hasOwnProperty.call(o,h)?Array.isArray(o[h])?o[h].push(l):o[h]=[o[h],l]:o[h]=l}return o}function i(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}}function F(r,n,o,e){return n=n||"&",o=o||"=","object"==typeof(r=null===r?void 0:r)?Object.keys(r).map(function(e){var t=encodeURIComponent(i(e))+o;return Array.isArray(r[e])?r[e].map(function(e){return t+encodeURIComponent(i(e))}).join(n):t+encodeURIComponent(i(r[e]))}).join(n):e?encodeURIComponent(i(e))+o+encodeURIComponent(i(r)):""}function _(e,t){return n(e,!1,!0).resolve(t)}function L(e,t){return e?n(e,!1,!0).resolveObject(t):t}function D(e){return(e=C(e)?n(e):e)instanceof A?e.format():A.prototype.format.call(e)}var j=t(function(e,t){t.decode=t.parse=R,t.encode=t.stringify=F}),H=n,Z=A;function A(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var G=/^([a-z0-9.+-]+:)/i,$=/:[0-9]*$/,J=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,r=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),k=["'"].concat(r),S=["%","/","?",";","#"].concat(k),O=["/","?","#"],q=/^[+a-z0-9A-Z_-]{0,63}$/,K=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,W={javascript:!0,"javascript:":!0},T={javascript:!0,"javascript:":!0},I={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};function n(e,t,r){if(e&&s(e)&&e instanceof A)return e;var n=new A;return n.parse(e,t,r),n}A.prototype.parse=function(e,t,r){if(!C(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var n=e.indexOf("?"),n=-1!==n&&n<e.indexOf("#")?"?":"#",o=e.split(n);o[0]=o[0].replace(/\\/g,"/");var i=(i=e=o.join(n)).trim();if(!r&&1===e.split("#").length){o=J.exec(i);if(o)return this.path=i,this.href=i,this.pathname=o[1],o[2]?(this.search=o[2],this.query=t?j.parse(this.search.substr(1)):this.search.substr(1)):t&&(this.search="",this.query={}),this}var s,n=G.exec(i);if(n&&(s=(n=n[0]).toLowerCase(),this.protocol=s,i=i.substr(n.length)),!(r||n||i.match(/^\/\/[^@\/]+@[^@\/]+/))||!(x="//"===i.substr(0,2))||n&&T[n]||(i=i.substr(2),this.slashes=!0),!T[n]&&(x||n&&!I[n])){for(var a=-1,u=0;u<O.length;u++)-1!==(h=i.indexOf(O[u]))&&(-1===a||h<a)&&(a=h);-1!==(e=-1===a?i.lastIndexOf("@"):i.lastIndexOf("@",a))&&(o=i.slice(0,e),i=i.slice(e+1),this.auth=decodeURIComponent(o));for(var h,a=-1,u=0;u<S.length;u++)-1!==(h=i.indexOf(S[u]))&&(-1===a||h<a)&&(a=h);-1===a&&(a=i.length),this.host=i.slice(0,a),i=i.slice(a),this.parseHost(),this.hostname=this.hostname||"";r="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!r)for(var l=this.hostname.split(/\./),u=0,c=l.length;u<c;u++){var f=l[u];if(f&&!f.match(q)){for(var p="",v=0,d=f.length;v<d;v++)127<f.charCodeAt(v)?p+="x":p+=f[v];if(!p.match(q)){var y=l.slice(0,u),m=l.slice(u+1),g=f.match(K);g&&(y.push(g[1]),m.unshift(g[2])),m.length&&(i="/"+m.join(".")+i),this.hostname=y.join(".");break}}}255<this.hostname.length?this.hostname="":this.hostname=this.hostname.toLowerCase(),r||(this.hostname=N.toASCII(this.hostname));var b=this.port?":"+this.port:"",x=this.hostname||"";this.host=x+b,this.href+=this.host,r&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==i[0]&&(i="/"+i))}if(!W[s])for(u=0,c=k.length;u<c;u++){var w,A=k[u];-1!==i.indexOf(A)&&((w=encodeURIComponent(A))===A&&(w=escape(A)),i=i.split(A).join(w))}n=i.indexOf("#"),-1!==n&&(this.hash=i.substr(n),i=i.slice(0,n)),e=i.indexOf("?");return-1!==e?(this.search=i.substr(e),this.query=i.substr(e+1),t&&(this.query=j.parse(this.query)),i=i.slice(0,e)):t&&(this.search="",this.query={}),i&&(this.pathname=i),I[s]&&this.hostname&&!this.pathname&&(this.pathname="/"),(this.pathname||this.search)&&(b=this.pathname||"",o=this.search||"",this.path=b+o),this.href=this.format(),this},A.prototype.format=function(){var e=this.auth||"",t=(e&&(e=(e=encodeURIComponent(e)).replace(/%3A/i,":"),e+="@"),this.protocol||""),r=this.pathname||"",n=this.hash||"",o=!1,i="",e=(this.host?o=e+this.host:this.hostname&&(o=e+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(o+=":"+this.port)),this.query&&s(this.query)&&Object.keys(this.query).length&&(i=j.stringify(this.query)),this.search||i&&"?"+i||"");return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||I[t])&&!1!==o?(o="//"+(o||""),r&&"/"!==r.charAt(0)&&(r="/"+r)):o=o||"",n&&"#"!==n.charAt(0)&&(n="#"+n),e&&"?"!==e.charAt(0)&&(e="?"+e),t+o+(r=r.replace(/[?#]/g,function(e){return encodeURIComponent(e)}))+(e=e.replace("#","%23"))+n},A.prototype.resolve=function(e){return this.resolveObject(n(e,!1,!0)).format()},A.prototype.resolveObject=function(e){C(e)&&((f=new A).parse(e,!1,!0),e=f);for(var t=new A,r=Object.keys(this),n=0;n<r.length;n++){var o=r[n];t[o]=this[o]}if(t.hash=e.hash,""===e.href)return t.href=t.format(),t;if(e.slashes&&!e.protocol){for(var i=Object.keys(e),s=0;s<i.length;s++){var a=i[s];"protocol"!==a&&(t[a]=e[a])}return I[t.protocol]&&t.hostname&&!t.pathname&&(t.path=t.pathname="/"),t.href=t.format(),t}if(e.protocol&&e.protocol!==t.protocol){if(!I[e.protocol]){for(var u=Object.keys(e),h=0;h<u.length;h++){var l=u[h];t[l]=e[l]}return t.href=t.format(),t}if(t.protocol=e.protocol,e.host||T[e.protocol])t.pathname=e.pathname;else{for(var c=(e.pathname||"").split("/");c.length&&!(e.host=c.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==c[0]&&c.unshift(""),c.length<2&&c.unshift(""),t.pathname=c.join("/")}return t.search=e.search,t.query=e.query,t.host=e.host||"",t.auth=e.auth,t.hostname=e.hostname||e.host,t.port=e.port,(t.pathname||t.search)&&(f=t.pathname||"",p=t.search||"",t.path=f+p),t.slashes=t.slashes||e.slashes,t.href=t.format(),t}var f=t.pathname&&"/"===t.pathname.charAt(0),p=e.host||e.pathname&&"/"===e.pathname.charAt(0),f=p||f||t.host&&e.pathname,v=f,d=t.pathname&&t.pathname.split("/")||[],c=e.pathname&&e.pathname.split("/")||[],y=t.protocol&&!I[t.protocol];if(y&&(t.hostname="",t.port=null,t.host&&(""===d[0]?d[0]=t.host:d.unshift(t.host)),t.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===c[0]?c[0]=e.host:c.unshift(e.host)),e.host=null),f=f&&(""===c[0]||""===d[0])),p)t.host=(e.host||""===e.host?e:t).host,t.hostname=(e.hostname||""===e.hostname?e:t).hostname,t.search=e.search,t.query=e.query,d=c;else if(c.length)(d=d||[]).pop(),d=d.concat(c),t.search=e.search,t.query=e.query;else if(!M(e.search))return y&&(t.hostname=t.host=d.shift(),(x=!!(t.host&&0<t.host.indexOf("@"))&&t.host.split("@"))&&(t.auth=x.shift(),t.host=t.hostname=x.shift())),t.search=e.search,t.query=e.query,w(t.pathname)&&w(t.search)||(t.path=(t.pathname||"")+(t.search||"")),t.href=t.format(),t;if(!d.length)return t.pathname=null,t.search?t.path="/"+t.search:t.path=null,t.href=t.format(),t;for(var m=d.slice(-1)[0],p=(t.host||e.host||1<d.length)&&("."===m||".."===m)||""===m,g=0,b=d.length;0<=b;b--)"."===(m=d[b])?d.splice(b,1):".."===m?(d.splice(b,1),g++):g&&(d.splice(b,1),g--);if(!f&&!v)for(;g--;)d.unshift("..");!f||""===d[0]||d[0]&&"/"===d[0].charAt(0)||d.unshift(""),p&&"/"!==d.join("/").substr(-1)&&d.push("");var x,v=""===d[0]||d[0]&&"/"===d[0].charAt(0);return y&&(t.hostname=t.host=!v&&d.length?d.shift():"",(x=!!(t.host&&0<t.host.indexOf("@"))&&t.host.split("@"))&&(t.auth=x.shift(),t.host=t.hostname=x.shift())),(f=f||t.host&&d.length)&&!v&&d.unshift(""),d.length?t.pathname=d.join("/"):(t.pathname=null,t.path=null),w(t.pathname)&&w(t.search)||(t.path=(t.pathname||"")+(t.search||"")),t.auth=e.auth||t.auth,t.slashes=t.slashes||e.slashes,t.href=t.format(),t},A.prototype.parseHost=function(){var e=this.host,t=$.exec(e);t&&(":"!==(t=t[0])&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)};var Y={parse:H,resolve:_,resolveObject:L,format:D,Url:Z},r=f.defaults.adapter;f.defaults.adapter=l?r:require("axios/lib/adapters/http");var c={readBlockAsync:function(n,o,i){return new Promise(function(e,t){var r=n.slice||n.mozSlice||n.webkitSlice;return r?e(r.call(n,o,i)):t(new Error("not support File type!"))})}};function o(e,t){for(var r=0,n=e.length-1;0<=n;n--){var o=e[n];"."===o?e.splice(n,1):".."===o?(e.splice(n,1),r++):r&&(e.splice(n,1),r--)}if(t)for(;r--;)e.unshift("..");return e}function u(e){return X.exec(e).slice(1)}var X=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/;function h(){for(var e="",t=!1,r=arguments.length-1;-1<=r&&!t;r--){var n=0<=r?arguments[r]:"/";if("string"!=typeof n)throw new TypeError("Arguments to path.resolve must be strings");n&&(e=n+"/"+e,t="/"===n.charAt(0))}return(t?"/":"")+(e=o(m(e.split("/"),function(e){return!!e}),!t).join("/"))||"."}function v(e){var t=d(e),r="/"===Q(e,-1);return(e=(e=o(m(e.split("/"),function(e){return!!e}),!t).join("/"))||t?e:".")&&r&&(e+="/"),(t?"/":"")+e}function d(e){return"/"===e.charAt(0)}var y={extname:function(e){return u(e)[3]},basename:function(e,t){return e=u(e)[2],e=t&&e.substr(-1*t.length)===t?e.substr(0,e.length-t.length):e},dirname:function(e){var t=(e=u(e))[0],e=e[1];return t||e?t+(e=e&&e.substr(0,e.length-1)):"."},sep:"/",delimiter:":",relative:function(e,t){function r(e){for(var t=0;t<e.length&&""===e[t];t++);for(var r=e.length-1;0<=r&&""===e[r];r--);return r<t?[]:e.slice(t,r-t+1)}e=h(e).substr(1),t=h(t).substr(1);for(var n=r(e.split("/")),o=r(t.split("/")),i=Math.min(n.length,o.length),s=i,a=0;a<i;a++)if(n[a]!==o[a]){s=a;break}for(var u=[],a=s;a<n.length;a++)u.push("..");return(u=u.concat(o.slice(s))).join("/")},join:function(){return v(m(Array.prototype.slice.call(arguments,0),function(e,t){if("string"!=typeof e)throw new TypeError("Arguments to path.join must be strings");return e}).join("/"))},isAbsolute:d,normalize:v,resolve:h};function m(e,t){if(e.filter)return e.filter(t);for(var r=[],n=0;n<e.length;n++)t(e[n],n,e)&&r.push(e[n]);return r}var Q="b"==="ab".substr(-1)?function(e,t,r){return e.substr(t,r)}:function(e,t,r){return t<0&&(t=e.length+t),e.substr(t,r)};function V(e){return null!=e&&(ie(e)||"function"==typeof(t=e).readFloatLE&&"function"==typeof t.slice&&ie(t.slice(0,0))||!!e._isBuffer);var t}var ee=function(e,t,r,s){function b(e,t){var r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r}function x(e,t){return e<<t|e>>>32-t}function a(e,t){e[t>>5]|=128<<24-t%32,e[15+(t+64>>9<<4)]=t;for(var r,n,o,i=[80],s=1732584193,a=-271733879,u=-1732584194,h=271733878,l=-1009589776,c=0;c<e.length;c+=16){for(var f=s,p=a,v=u,d=h,y=l,m=0;m<80;m++){i[m]=m<16?e[c+m]:x(i[m-3]^i[m-8]^i[m-14]^i[m-16],1);var g=b(b(x(s,5),(g=a,n=u,o=h,(r=m)<20?g&n|~g&o:!(r<40)&&r<60?g&n|g&o|n&o:g^n^o)),b(b(l,i[m]),(r=m)<20?1518500249:r<40?1859775393:r<60?-1894007588:-899497514)),l=h,h=u,u=x(a,30),a=s,s=g}s=b(s,f),a=b(a,p),u=b(u,v),h=b(h,d),l=b(l,y)}return[s,a,u,h,l]}function u(e){for(var t=[],r=(1<<s)-1,n=0;n<e.length*s;n+=s)t[n>>5]|=(e.charCodeAt(n/8)&r)<<32-s-n%32;return t}r=r||"=",s=s||8;for(var n=function(e,t){for(var r=u(e),n=(16<r.length&&(r=a(r,e.length*s)),[16]),o=[16],i=0;i<16;i++)n[i]=909522486^r[i],o[i]=1549556828^r[i];return e=a(n.concat(u(t)),512+t.length*s),a(o.concat(e),672)}(e,t),o="",i=0;i<4*n.length;i+=3)for(var h=(n[i>>2]>>8*(3-i%4)&255)<<16|(n[i+1>>2]>>8*(3-(i+1)%4)&255)<<8|n[i+2>>2]>>8*(3-(i+2)%4)&255,l=0;l<4;l++)8*i+6*l>32*n.length?o+=r:o+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(h>>6*(3-l)&63);return o},te=t(function(e,t){var r=P;function h(e){throw new o(e)}var n=t,t=e&&e.exports==n&&e,e="object"==typeof P&&P,o=(e.global!==e&&e.window!==e||(r=e),function(e){this.message=e}),l=(o.prototype=new Error,o.prototype.name="InvalidCharacterError","ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),a=/[\t\n\f\r ]/g,i={encode:function(e){e=String(e),/[^\0-\xFF]/.test(e)&&h("The string to be encoded contains characters outside of the Latin1 range.");for(var t,r,n,o,i=e.length%3,s="",a=-1,u=e.length-i;++a<u;)t=e.charCodeAt(a)<<16,r=e.charCodeAt(++a)<<8,n=e.charCodeAt(++a),s+=l.charAt((o=t+r+n)>>18&63)+l.charAt(o>>12&63)+l.charAt(o>>6&63)+l.charAt(63&o);return 2==i?(t=e.charCodeAt(a)<<8,r=e.charCodeAt(++a),s+=l.charAt((o=t+r)>>10)+l.charAt(o>>4&63)+l.charAt(o<<2&63)+"="):1==i&&(o=e.charCodeAt(a),s+=l.charAt(o>>2)+l.charAt(o<<4&63)+"=="),s},decode:function(e){for(var t,r,n=(e=String(e).replace(a,"")).length,o=((n=n%4==0?(e=e.replace(/==?$/,"")).length:n)%4!=1&&!/[^+a-zA-Z0-9/]/.test(e)||h("Invalid character: the string to be decoded is not correctly encoded."),0),i="",s=-1;++s<n;)r=l.indexOf(e.charAt(s)),t=o%4?64*t+r:r,o++%4&&(i+=String.fromCharCode(255&t>>(-2*o&6)));return i},version:"1.0.0"};if(n&&!n.nodeType)if(t)t.exports=i;else for(var s in i)i.hasOwnProperty(s)&&(n[s]=i[s]);else r.base64=i}),re="3.4.5",ne=t(function(e){var i,r;i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r={rotl:function(e,t){return e<<t|e>>>32-t},rotr:function(e,t){return e<<32-t|e>>>t},endian:function(e){if(e.constructor==Number)return 16711935&r.rotl(e,8)|4278255360&r.rotl(e,24);for(var t=0;t<e.length;t++)e[t]=r.endian(e[t]);return e},randomBytes:function(e){for(var t=[];0<e;e--)t.push(Math.floor(256*Math.random()));return t},bytesToWords:function(e){for(var t=[],r=0,n=0;r<e.length;r++,n+=8)t[n>>>5]|=e[r]<<24-n%32;return t},wordsToBytes:function(e){for(var t=[],r=0;r<32*e.length;r+=8)t.push(e[r>>>5]>>>24-r%32&255);return t},bytesToHex:function(e){for(var t=[],r=0;r<e.length;r++)t.push((e[r]>>>4).toString(16)),t.push((15&e[r]).toString(16));return t.join("")},hexToBytes:function(e){for(var t=[],r=0;r<e.length;r+=2)t.push(parseInt(e.substr(r,2),16));return t},bytesToBase64:function(e){for(var t=[],r=0;r<e.length;r+=3)for(var n=e[r]<<16|e[r+1]<<8|e[r+2],o=0;o<4;o++)8*r+6*o<=8*e.length?t.push(i.charAt(n>>>6*(3-o)&63)):t.push("=");return t.join("")},base64ToBytes:function(e){e=e.replace(/[^A-Z0-9+\/]/gi,"");for(var t=[],r=0,n=0;r<e.length;n=++r%4)0!=n&&t.push((i.indexOf(e.charAt(r-1))&Math.pow(2,-2*n+8)-1)<<2*n|i.indexOf(e.charAt(r))>>>6-2*n);return t}},e.exports=r}),g={utf8:{stringToBytes:function(e){return g.bin.stringToBytes(unescape(encodeURIComponent(e)))},bytesToString:function(e){return decodeURIComponent(escape(g.bin.bytesToString(e)))}},bin:{stringToBytes:function(e){for(var t=[],r=0;r<e.length;r++)t.push(255&e.charCodeAt(r));return t},bytesToString:function(e){for(var t=[],r=0;r<e.length;r++)t.push(String.fromCharCode(e[r]));return t.join("")}}},oe=g;function ie(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}var se=t(function(e){function y(e,t){e.constructor==String?e=(t&&"binary"===t.encoding?x:g).stringToBytes(e):b(e)?e=Array.prototype.slice.call(e,0):Array.isArray(e)||e.constructor===Uint8Array||(e=e.toString());for(var r=m.bytesToWords(e),t=8*e.length,n=1732584193,o=-271733879,i=-1732584194,s=271733878,a=0;a<r.length;a++)r[a]=16711935&(r[a]<<8|r[a]>>>24)|4278255360&(r[a]<<24|r[a]>>>8);r[t>>>5]|=128<<t%32,r[14+(64+t>>>9<<4)]=t;for(var u=y._ff,h=y._gg,l=y._hh,c=y._ii,a=0;a<r.length;a+=16){var f=n,p=o,v=i,d=s,n=u(n,o,i,s,r[a+0],7,-680876936),s=u(s,n,o,i,r[a+1],12,-389564586),i=u(i,s,n,o,r[a+2],17,606105819),o=u(o,i,s,n,r[a+3],22,-1044525330);n=u(n,o,i,s,r[a+4],7,-176418897),s=u(s,n,o,i,r[a+5],12,1200080426),i=u(i,s,n,o,r[a+6],17,-1473231341),o=u(o,i,s,n,r[a+7],22,-45705983),n=u(n,o,i,s,r[a+8],7,1770035416),s=u(s,n,o,i,r[a+9],12,-1958414417),i=u(i,s,n,o,r[a+10],17,-42063),o=u(o,i,s,n,r[a+11],22,-1990404162),n=u(n,o,i,s,r[a+12],7,1804603682),s=u(s,n,o,i,r[a+13],12,-40341101),i=u(i,s,n,o,r[a+14],17,-1502002290),n=h(n,o=u(o,i,s,n,r[a+15],22,1236535329),i,s,r[a+1],5,-165796510),s=h(s,n,o,i,r[a+6],9,-1069501632),i=h(i,s,n,o,r[a+11],14,643717713),o=h(o,i,s,n,r[a+0],20,-373897302),n=h(n,o,i,s,r[a+5],5,-701558691),s=h(s,n,o,i,r[a+10],9,38016083),i=h(i,s,n,o,r[a+15],14,-660478335),o=h(o,i,s,n,r[a+4],20,-405537848),n=h(n,o,i,s,r[a+9],5,568446438),s=h(s,n,o,i,r[a+14],9,-1019803690),i=h(i,s,n,o,r[a+3],14,-187363961),o=h(o,i,s,n,r[a+8],20,1163531501),n=h(n,o,i,s,r[a+13],5,-1444681467),s=h(s,n,o,i,r[a+2],9,-51403784),i=h(i,s,n,o,r[a+7],14,1735328473),n=l(n,o=h(o,i,s,n,r[a+12],20,-1926607734),i,s,r[a+5],4,-378558),s=l(s,n,o,i,r[a+8],11,-2022574463),i=l(i,s,n,o,r[a+11],16,1839030562),o=l(o,i,s,n,r[a+14],23,-35309556),n=l(n,o,i,s,r[a+1],4,-1530992060),s=l(s,n,o,i,r[a+4],11,1272893353),i=l(i,s,n,o,r[a+7],16,-155497632),o=l(o,i,s,n,r[a+10],23,-1094730640),n=l(n,o,i,s,r[a+13],4,681279174),s=l(s,n,o,i,r[a+0],11,-358537222),i=l(i,s,n,o,r[a+3],16,-722521979),o=l(o,i,s,n,r[a+6],23,76029189),n=l(n,o,i,s,r[a+9],4,-640364487),s=l(s,n,o,i,r[a+12],11,-421815835),i=l(i,s,n,o,r[a+15],16,530742520),n=c(n,o=l(o,i,s,n,r[a+2],23,-995338651),i,s,r[a+0],6,-198630844),s=c(s,n,o,i,r[a+7],10,1126891415),i=c(i,s,n,o,r[a+14],15,-1416354905),o=c(o,i,s,n,r[a+5],21,-57434055),n=c(n,o,i,s,r[a+12],6,1700485571),s=c(s,n,o,i,r[a+3],10,-1894986606),i=c(i,s,n,o,r[a+10],15,-1051523),o=c(o,i,s,n,r[a+1],21,-2054922799),n=c(n,o,i,s,r[a+8],6,1873313359),s=c(s,n,o,i,r[a+15],10,-30611744),i=c(i,s,n,o,r[a+6],15,-1560198380),o=c(o,i,s,n,r[a+13],21,1309151649),n=c(n,o,i,s,r[a+4],6,-145523070),s=c(s,n,o,i,r[a+11],10,-1120210379),i=c(i,s,n,o,r[a+2],15,718787259),o=c(o,i,s,n,r[a+9],21,-343485551),n=n+f>>>0,o=o+p>>>0,i=i+v>>>0,s=s+d>>>0}return m.endian([n,o,i,s])}var m,g,b,x;m=ne,g=oe.utf8,b=V,x=oe.bin,y._ff=function(e,t,r,n,o,i,s){e=e+(t&r|~t&n)+(o>>>0)+s;return(e<<i|e>>>32-i)+t},y._gg=function(e,t,r,n,o,i,s){e=e+(t&n|r&~n)+(o>>>0)+s;return(e<<i|e>>>32-i)+t},y._hh=function(e,t,r,n,o,i,s){e=e+(t^r^n)+(o>>>0)+s;return(e<<i|e>>>32-i)+t},y._ii=function(e,t,r,n,o,i,s){e=e+(r^(t|~n))+(o>>>0)+s;return(e<<i|e>>>32-i)+t},y._blocksize=16,y._digestsize=16,e.exports=function(e,t){if(null==e)throw new Error("Illegal argument "+e);e=m.wordsToBytes(y(e,t));return t&&t.asBytes?e:t&&t.asString?x.bytesToString(e):m.bytesToHex(e)}});function b(e,t){var r=[t.method,t.path],n=(["date","policy","contentMd5"].forEach(function(e){t[e]&&r.push(t[e])}),ee(e.password,r.join("&")));return"UPYUN "+e.operatorName+":"+n}function ae(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var x={genSign:b,getHeaderSign:function(e,t,r){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null,o=(new Date).toGMTString();return{Authorization:b(e,{method:t,path:r="/"+e.serviceName+r,date:o,contentMd5:n}),"X-Date":o}},getPolicyAndAuthorization:function(e,t){if(t.service=e.serviceName,void 0===t["save-key"])throw new Error("upyun - calclate body sign need save-key");void 0===t.expiration&&(t.expiration=parseInt(new Date/1e3+1800,10));var r=te.encode(JSON.stringify(t));return{policy:r,authorization:b(e,{method:"POST",path:"/"+e.serviceName,policy:r,contentMd5:t["content-md5"]})}},getPurgeHeaderSign:function(e,t){var r=(new Date).toGMTString(),t=t.join("\n"),t=se(t+"&"+e.serviceName+"&"+r+"&"+e.password);return{Authorization:"UpYun "+e.serviceName+":"+e.operatorName+":"+t,Date:r,"User-Agent":"Js-Sdk/"+re}}};function ue(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var he=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e)){var r=t,n=[],o=!0,t=!1,i=void 0;try{for(var s,a=e[Symbol.iterator]();!(o=(s=a.next()).done)&&(n.push(s.value),!r||n.length!==r);o=!0);}catch(e){t=!0,i=e}finally{try{!o&&a.return&&a.return()}finally{if(t)throw i}}return n}throw new TypeError("Invalid attempt to destructure non-iterable instance")};function B(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(ae(this,B),void 0===e.serviceName)throw new Error("upyun - must config serviceName");if("function"==typeof t&&(r=t,t={}),"function"!=typeof r&&l)throw new Error("upyun - must config a callback function getHeaderSign in client side");if(!l&&(void 0===e.operatorName||void 0===e.password))throw new Error("upyun - must config operateName and password in server side");t=Object.assign({domain:"v0.api.upyun.com",protocol:"https"},t),this.endpoint=t.protocol+"://"+t.domain,t=t.proxy;this.proxy=t,this.req=function(e,n,o){var t=(3<arguments.length&&void 0!==arguments[3]?arguments[3]:{}).proxy,e=f.create({baseURL:e+"/"+n.serviceName,maxRedirects:0,proxy:t});return e.interceptors.request.use(function(t){var e=t.method.toUpperCase(),r=Y.resolve("/",encodeURI(t.url||"")),e=(0===r.indexOf(t.baseURL)&&(r=r.substring(t.baseURL.length)),t.url=r,o(n,e,r,t.headers["Content-MD5"]));return(e=p(e)?e:Promise.resolve(e)).then(function(e){return t.headers.common=e,Promise.resolve(t)})},function(e){throw new Error("upyun - request failed: "+e.message)}),e.interceptors.response.use(function(e){return e},function(e){var t,r=e.response;if(void 0===r)throw e;if(404!==r.status)throw t=new Error("upyun - response error: "+e.message),e.response.data&&e.response.data.code&&(t.code=e.response.data.code),t;return r}),e}(this.endpoint,e,r||le,{proxy:t}),this.bucket=e,this.service=e,l||this.setBodySignCallback(x.getPolicyAndAuthorization)}function E(e){return 0===e.indexOf("x-upyun-meta-")}function le(){return x.getHeaderSign.apply(x,arguments)}function U(e){var t={},r=!0,n=!1,o=void 0;try{for(var i,s=Object.keys(e)[Symbol.iterator]();!(r=(i=s.next()).done);r=!0){var a=i.value;t[a.toLowerCase()]=e[a]}}catch(e){n=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(n)throw o}}return t}(function(e,t,r){t&&ue(e.prototype,t),r&&ue(e,r)})(B,[{key:"setService",value:function(e){this.service=e,this.req.defaults.baseURL=this.endpoint+"/"+e.serviceName}},{key:"setBucket",value:function(e){return this.setService(e)}},{key:"setBodySignCallback",value:function(e){if("function"!=typeof e)throw new Error("upyun - getBodySign should be a function");this.bodySignCallback=e}},{key:"usage",value:function(){return this.req.get((0<arguments.length&&void 0!==arguments[0]?arguments[0]:"/")+"?usage").then(function(e){e=e.data;return Promise.resolve(e)})}},{key:"listDir",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"/",t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},r=t.limit,r=void 0===r?100:r,n=t.order,n=void 0===n?"asc":n,t=t.iter,t=void 0===t?"":t,o={};return 100!==r&&(o["x-list-limit"]=r),"asc"!==n&&(o["x-list-order"]=n),t&&(o["x-list-iter"]=t),this.req.get(e,{headers:o}).then(function(e){var t=e.data,r=e.headers;if(404===e.status)return!1;e=r["x-upyun-list-iter"];if(!t)return Promise.resolve({files:[],next:e});r=t.split("\n").map(function(e){var e=e.split("\t"),e=he(e,4),t=e[0],r=e[1],n=e[2],e=e[3];return{name:t,type:r,size:parseInt(n),time:parseInt(e)}});return Promise.resolve({files:r,next:e})})}},{key:"putFile",value:function(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},n=["Content-MD5","Content-Length","Content-Type","Content-Secret","x-gmkerl-thumb"],o={},i={},s=!0,a=!1,u=void 0;try{for(var h,l=Object.keys(r)[Symbol.iterator]();!(s=(h=l.next()).done);s=!0){var c=h.value;i[c.toLowerCase()]=r[c]}}catch(e){a=!0,u=e}finally{try{!s&&l.return&&l.return()}finally{if(a)throw u}}var f=!0,a=!1,u=void 0;try{for(var p,v=Object.keys(i)[Symbol.iterator]();!(f=(p=v.next()).done);f=!0){var d=p.value;E(d)&&i[d]?o[d]=i[d]:n.forEach(function(e){var t=e.toLowerCase(),t=i[t];t&&(o[e]=t)})}}catch(e){a=!0,u=e}finally{try{!f&&v.return&&v.return()}finally{if(a)throw u}}return this.req.put(e,t,{headers:o}).then(function(e){var r=e.headers;if(200!==e.status)return Promise.resolve(!1);var n={};return["x-upyun-width","x-upyun-height","x-upyun-file-type","x-upyun-frames"].forEach(function(e){var t=e.split("x-upyun-")[1];r[e]&&(n[t]=r[e],"file-type"!==t&&(n[t]=parseInt(n[t],10)))}),Promise.resolve(!(0<Object.keys(n).length)||n)})}},{key:"initMultipartUpload",value:function(e,t){var n=this,r=void 0,o=U(2<arguments.length&&void 0!==arguments[2]?arguments[2]:{}),i=o["x-upyun-multi-type"],i=l?(r=Promise.resolve(t.size),i||t.type):Buffer.isBuffer(t)?(r=Promise.resolve(t.length),i||"application/octet-stream"):(r=c.getFileSizeAsync(t),i||c.getContentType(t));return r.then(function(r){return Object.assign(o,{"x-upyun-multi-disorder":!0,"x-upyun-multi-stage":"initiate","x-upyun-multi-length":r,"x-upyun-multi-type":i}),n.req.put(e,null,{headers:o}).then(function(e){var t=e.headers;if(204!==e.status)return Promise.resolve(!1);e=t["x-upyun-multi-uuid"];return Promise.resolve({fileSize:r,partCount:Math.ceil(r/a),uuid:e})})})}},{key:"multipartUpload",value:function(t,r,n,o){var i=this,s=o*a;return(l?Promise.resolve(r.size):Buffer.isBuffer(r)?Promise.resolve(r.length):c.getFileSizeAsync(r)).then(function(e){e=Math.min(s+a,e);return Buffer.isBuffer(r)?r.slice(s,e):c.readBlockAsync(r,s,e)}).then(function(e){return i.req.put(t,e,{headers:{"x-upyun-multi-stage":"upload","x-upyun-multi-uuid":n,"x-upyun-part-id":o}}).then(function(e){e=e.status;return Promise.resolve(204===e)})})}},{key:"completeMultipartUpload",value:function(e,t){return this.req.put(e,null,{headers:{"x-upyun-multi-stage":"complete","x-upyun-multi-uuid":t}}).then(function(e){e=e.status;return Promise.resolve(204===e||201===e)})}},{key:"makeDir",value:function(e){return this.req.post(e,null,{headers:{folder:"true"}}).then(function(e){e=e.status;return Promise.resolve(200===e)})}},{key:"copy",value:function(e,t){var r=U(2<arguments.length&&void 0!==arguments[2]?arguments[2]:{}),r=Object.assign(r,{"x-upyun-copy-source":y.join("/",this.service.serviceName,t)});return this.req.put(e,null,{headers:r}).then(function(e){e=e.status;return Promise.resolve(200<=e&&e<300)})}},{key:"move",value:function(e,t){var r=U(2<arguments.length&&void 0!==arguments[2]?arguments[2]:{}),r=Object.assign(r,{"x-upyun-move-source":y.join("/",this.service.serviceName,t)});return this.req.put(e,null,{headers:r}).then(function(e){e=e.status;return Promise.resolve(200<=e&&e<300)})}},{key:"headFile",value:function(e){return this.req.head(e).then(function(e){var r=e.headers;if(404===e.status)return Promise.resolve(!1);var n={"Content-Md5":r["content-md5"]||""};return["x-upyun-file-type","x-upyun-file-size","x-upyun-file-date"].forEach(function(e){var t=e.split("x-upyun-file-")[1];r[e]&&(n[t]=r[e],"size"!==t&&"date"!==t||(n[t]=parseInt(n[t],10)))}),Promise.resolve(n)})}},{key:"deleteFile",value:function(e){var t={};return 1<arguments.length&&void 0!==arguments[1]&&arguments[1]&&(t["x-upyun-async"]=!0),this.req.delete(e,{headers:t}).then(function(e){e=e.status;return Promise.resolve(200===e)})}},{key:"deleteDir",value:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.deleteFile.apply(this,t)}},{key:"getFile",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;if(t&&l)throw new Error("upyun - save as stream are only available on the server side.");return this.req({method:"GET",url:e,responseType:t?"stream":null}).then(function(e){if(404===e.status)return Promise.resolve(!1);if(!t)return Promise.resolve(e.data);var r=e.data.pipe(t);return new Promise(function(e,t){r.on("finish",function(){return e(r)}),r.on("error",t)})})}},{key:"updateMetadata",value:function(e,t){var r,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"merge",o={};for(r in t)E(r)?o[r]=t:o["x-upyun-meta-"+r]=t[r];return this.req.patch(e+"?metadata="+n,null,{headers:o}).then(function(e){e=e.status;return Promise.resolve(200===e)})}},{key:"getMetadata",value:function(e){return this.req.get(e).then(function(e){var t=e.headers;if(200!==e.status)return Promise.resolve(!1);var r,n={};for(r in t)E(r)&&(n[r]=t[r]);return Promise.resolve(n)})}},{key:"blockUpload",value:function(a,u){var h=this,e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},t=void 0,r=void 0,r=l?(t=Promise.resolve(u.size),u.type):(t=c.getFileSizeAsync(u),c.getContentType(u));return t.then(function(o){Object.assign(e,{"x-upyun-multi-stage":"initiate","x-upyun-multi-length":o,"x-upyun-multi-type":r});var i=1048576,s=Math.ceil(o/i);return h.req.put(a,null,{headers:e}).then(function(e){for(var e=e.headers,n=e["x-upyun-multi-uuid"],e=e["x-upyun-next-part-id"],t=Promise.resolve(e),r=0;r<s;r++)t=t.then(function(t){var e=t*i,r=Math.min(e+i,o);return c.readBlockAsync(u,e,r).then(function(e){return h.req.put(a,e,{headers:{"x-upyun-multi-stage":"upload","x-upyun-multi-uuid":n,"x-upyun-part-id":t}}).then(function(e){e=e.headers;return t=e["x-upyun-next-part-id"],Promise.resolve(t)})})});return t.then(function(){return h.req.put(a,null,{headers:{"x-upyun-multi-stage":"complete","x-upyun-multi-uuid":n}}).then(function(e){e=e.status;return Promise.resolve(204===e||201===e)})})})})}},{key:"formPutFile",value:function(e,t){var r=this,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},o=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{},i={},s=!0,a=!1,u=void 0;try{for(var h,l=Object.keys(n)[Symbol.iterator]();!(s=(h=l.next()).done);s=!0){var c=h.value;i[c.toLowerCase()]=n[c]}}catch(e){a=!0,u=e}finally{try{!s&&l.return&&l.return()}finally{if(a)throw u}}if("function"!=typeof this.bodySignCallback)throw new Error("upyun - must setBodySignCallback first!");i.service=this.service.serviceName,i["save-key"]=e;a=this.bodySignCallback(this.service,i);return(a=p(a)?a:Promise.resolve(a)).then(function(e){return function(e,t,r,n){var o=r.authorization,r=r.policy,n=(3<arguments.length&&void 0!==n?n:{}).filename,i=new FormData;return i.append("authorization",o),i.append("policy",r),"string"==typeof t&&(t=new Blob([t],{type:"text/plain"})),n=n&&y.basename(n),i.append("file",t,n),f.post(e,i).then(function(e){var t=e.status,e=e.data;return 200===t&&Promise.resolve(e)})}(r.endpoint+"/"+i.service,t,e,o)})}},{key:"purge",value:function(e){var t=x.getPurgeHeaderSign(this.service,e="string"==typeof e?[e]:e);return f.post("http://purge.upyun.com/purge/","purge="+e.join("\n"),{headers:t,proxy:this.proxy}).then(function(e){e=e.data;if(0===Object.keys(e.invalid_domain_of_url).length)return!0;throw new Error("some url purge failed "+e.invalid_domain_of_url.join(" "))},function(e){throw new Error("upyun - request failed: "+e.message)})}}]);function z(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"",r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"";ae(this,z),this.bucketName=e,this.serviceName=this.bucketName,this.operatorName=t,this.password=se(r)}return{Client:B,sign:x,Bucket:z,Service:z}});